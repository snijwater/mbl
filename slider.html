<section class="section">
    <div class="slider js-slider">
        <ul class="slider__list">
            <li class="slider__list__item is-current">
                <img src="http://placehold.it/400x600" alt="">
            </li>
            <li class="slider__list__item">
                <img src="http://placehold.it/400x600/999999/ffffff" alt="">
            </li>
            <li class="slider__list__item">
                <img src="http://placehold.it/400x600/666666/ffffff" alt="">
            </li>
        </ul>

        <ul class="slider__previews js-slider-next">
            <li class="slider__previews__item is-current">
                <img src="http://placehold.it/200x300/999999/ffffff" alt="">
            </li>
            <li class="slider__previews__item">
                <img src="http://placehold.it/200x300/666666/ffffff" alt="">
            </li>
            <li class="slider__previews__item">
                <img src="http://placehold.it/200x300" alt="">
            </li>
        </ul>
    </div>
</section>

<style>
*{
    margin: 0;
    padding: 0;
    position: relative;
}

html{
    box-sizing: border-box;
}

*,
*:before,
*:after{
    box-sizing: inherit;
}

ul,
li{
    list-style: none;
}

p{
    font-size: 14px;
    font-family: sans-serif;
    letter-spacing: .5px;
}

.section {
    padding: 4rem 2rem;
}

.slider {
    width: 400px;
    height: 600px;
}

.slider__list {
    position: absolute;

    width: inherit;
    height: inherit;
    overflow: hidden;
}

.slider__list__item {
    position: absolute;

    width: inherit;
    height: inherit;

    transform: translateX(100%);
}

.slider__list__item img {
    width: inherit;
    height: inherit;
}

.slider__list__item.is-current {
    transform: translateX(0);
}

.slider__previews {
    bottom: 0;
    right: 0;
    position: absolute;

    width: 200px;
    height: 300px;
    overflow: hidden;

    cursor: pointer;
    transform: translate(60%, -5%);
}

.slider__previews__item {
    position: absolute;

    transform: translateX(100%);
}

.slider__previews__item.is-current {
    transform: translateX(0);
}
</style>

<script type="text/javascript" src="src/js/vendor/TweenMax.min.js"></script>
<script type="text/javascript">
    window.addEventListener('DOMContentLoaded', function() {
        var slider = document.querySelector('.js-slider');

        if (!slider) {
            return false;
        }

        var nextTriggers = document.querySelectorAll('.js-slider-next');
        var currentItem = slider.querySelector('.slider__list__item.is-current');
        var currentPreview = slider.querySelector('.slider__previews__item.is-current');
        var nextItem = currentItem.nextElementSibling;
        var nextPreview = currentPreview.nextElementSibling;

        var animationItem = function() {
            var tl = new TimelineMax({ paused: true });
            console.log(nextPreview);
            tl.timeScale(2);
            TweenLite.defaultEase = Quart.easeOut;

            tl.set(nextItem, {
                x: '100%'
            }).set(nextPreview, {
                x: '100%'
            }).to(currentItem, 1, {
                x: '-100%'
            }).to(currentPreview, 1, {
                x: '-100%'
            }, 0).to(nextItem, 1, {
                x: '0%'
            }, 0).to(nextPreview, 1, {
                x: '0%'
            }, 0);

            return tl;
        }

        var itemAnimation = animationItem();

        var showNext = function() {
            // Don't do anything if the animation is still playing
            if (itemAnimation.isActive()) {
                return false;
            }

            // Rebuild timeline with new globals and play animation
            itemAnimation = animationItem();
            itemAnimation.play(0);

            // Switch globals
            var tempNextItem = nextItem;
            var tempNextPreview = nextPreview;

            currentItem = tempNextItem;
            currentPreview = tempNextPreview;
            nextItem = (tempNextItem.nextElementSibling) ? tempNextItem.nextElementSibling : slider.querySelector('.slider__list__item');
            nextPreview = (tempNextPreview.nextElementSibling) ? tempNextPreview.nextElementSibling : slider.querySelector('.slider__previews__item');
        }

        for (var a = 0; a < nextTriggers.length; a += 1) {
            if (!nextTriggers[a].getAttribute('data-click-attached')) {
                nextTriggers[a].addEventListener('click', function() {
                    showNext();
                });

                nextTriggers[a].setAttribute('data-click-attached', true);
            }
        }
    });
</script>